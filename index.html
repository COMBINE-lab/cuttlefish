
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      
      
      <link rel="icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.4.14">
    
    
      
        <title>Documentation for Cuttlefish</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.fad675c6.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#cuttlefish" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="." title="Documentation for Cuttlefish" class="md-header__button md-logo" aria-label="Documentation for Cuttlefish" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Documentation for Cuttlefish
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Cuttlefish
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="." title="Documentation for Cuttlefish" class="md-nav__button md-logo" aria-label="Documentation for Cuttlefish" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Documentation for Cuttlefish
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Cuttlefish
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="." class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Cuttlefish
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#table-of-contents" class="md-nav__link">
    <span class="md-ellipsis">
      Table of contents
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dependencies" class="md-nav__link">
    <span class="md-ellipsis">
      Dependencies
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    <span class="md-ellipsis">
      Installation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usage" class="md-nav__link">
    <span class="md-ellipsis">
      Usage
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Usage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#note" class="md-nav__link">
    <span class="md-ellipsis">
      Note
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#output-formats" class="md-nav__link">
    <span class="md-ellipsis">
      Output formats
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Output formats">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cuttlefish-2-output" class="md-nav__link">
    <span class="md-ellipsis">
      Cuttlefish 2 output
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuttlefish-1-output" class="md-nav__link">
    <span class="md-ellipsis">
      Cuttlefish 1 output
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#orientation-of-the-output" class="md-nav__link">
    <span class="md-ellipsis">
      Orientation of the output
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#colored-output-for-cuttlefish-1" class="md-nav__link">
    <span class="md-ellipsis">
      ''Colored'' output for Cuttlefish 1
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-usage" class="md-nav__link">
    <span class="md-ellipsis">
      Example usage
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Example usage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-cuttlefish-2" class="md-nav__link">
    <span class="md-ellipsis">
      Using Cuttlefish 2
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-cuttlefish-1" class="md-nav__link">
    <span class="md-ellipsis">
      Using Cuttlefish 1
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#larger-k-mer-sizes" class="md-nav__link">
    <span class="md-ellipsis">
      Larger k-mer sizes
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#differences-between-cuttlefish-1-2" class="md-nav__link">
    <span class="md-ellipsis">
      Differences between Cuttlefish 1 &amp; 2
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#citations-acknowledgement" class="md-nav__link">
    <span class="md-ellipsis">
      Citations &amp; Acknowledgement
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Citations & Acknowledgement">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cuttlefish-original" class="md-nav__link">
    <span class="md-ellipsis">
      Cuttlefish (original)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuttlefish-2" class="md-nav__link">
    <span class="md-ellipsis">
      Cuttlefish 2
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#licenses" class="md-nav__link">
    <span class="md-ellipsis">
      Licenses
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#table-of-contents" class="md-nav__link">
    <span class="md-ellipsis">
      Table of contents
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dependencies" class="md-nav__link">
    <span class="md-ellipsis">
      Dependencies
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    <span class="md-ellipsis">
      Installation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usage" class="md-nav__link">
    <span class="md-ellipsis">
      Usage
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Usage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#note" class="md-nav__link">
    <span class="md-ellipsis">
      Note
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#output-formats" class="md-nav__link">
    <span class="md-ellipsis">
      Output formats
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Output formats">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cuttlefish-2-output" class="md-nav__link">
    <span class="md-ellipsis">
      Cuttlefish 2 output
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuttlefish-1-output" class="md-nav__link">
    <span class="md-ellipsis">
      Cuttlefish 1 output
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#orientation-of-the-output" class="md-nav__link">
    <span class="md-ellipsis">
      Orientation of the output
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#colored-output-for-cuttlefish-1" class="md-nav__link">
    <span class="md-ellipsis">
      ''Colored'' output for Cuttlefish 1
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-usage" class="md-nav__link">
    <span class="md-ellipsis">
      Example usage
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Example usage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-cuttlefish-2" class="md-nav__link">
    <span class="md-ellipsis">
      Using Cuttlefish 2
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-cuttlefish-1" class="md-nav__link">
    <span class="md-ellipsis">
      Using Cuttlefish 1
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#larger-k-mer-sizes" class="md-nav__link">
    <span class="md-ellipsis">
      Larger k-mer sizes
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#differences-between-cuttlefish-1-2" class="md-nav__link">
    <span class="md-ellipsis">
      Differences between Cuttlefish 1 &amp; 2
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#citations-acknowledgement" class="md-nav__link">
    <span class="md-ellipsis">
      Citations &amp; Acknowledgement
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Citations & Acknowledgement">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cuttlefish-original" class="md-nav__link">
    <span class="md-ellipsis">
      Cuttlefish (original)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cuttlefish-2" class="md-nav__link">
    <span class="md-ellipsis">
      Cuttlefish 2
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#licenses" class="md-nav__link">
    <span class="md-ellipsis">
      Licenses
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="cuttlefish">Cuttlefish</h1>
<p><a href="https://anaconda.org/bioconda/cuttlefish"><img alt="Anaconda-Server Badge" src="https://anaconda.org/bioconda/cuttlefish/badges/version.svg" /></a>
<a href="https://anaconda.org/bioconda/cuttlefish"><img alt="Anaconda-Server Badge" src="https://anaconda.org/bioconda/cuttlefish/badges/platforms.svg" /></a>
<a href="https://anaconda.org/bioconda/cuttlefish"><img alt="Anaconda-Server Badge" src="https://anaconda.org/bioconda/cuttlefish/badges/license.svg" /></a></p>
<p><a href="http://bioconda.github.io/recipes/cuttlefish/README.html"><img alt="install with bioconda" src="https://img.shields.io/badge/install%20with-bioconda-brightgreen.svg?style=flat" /></a></p>
<p>Cuttlefish is a fast, parallel, and very lightweight memory tool to construct the compacted de Bruijn graph from sequencing reads or reference sequences. It is highly scalable in terms of the size of the input data.</p>
<h2 id="table-of-contents">Table of contents</h2>
<ul>
<li><a href="#overview">Overview</a></li>
<li><a href="#dependencies">Dependencies</a></li>
<li><a href="#installation">Installation</a></li>
<li><a href="#usage">Usage</a></li>
<li><a href="#output-formats">Output formats</a></li>
<li><a href="#colored-output-for-cuttlefish-1">''Colored'' output for Cuttlefish 1</a></li>
<li><a href="#example-usage">Example usage</a></li>
<li><a href="#larger-k-mer-sizes">Larger <em>k</em>-mer sizes</a></li>
<li><a href="#differences-between-cuttlefish-1--2">Differences between Cuttlefish 1 &amp; 2</a></li>
<li><a href="#citations--acknowledgement">Citations &amp; Acknowledgement</a></li>
<li><a href="#licenses">Licenses</a></li>
</ul>
<h2 id="overview">Overview</h2>
<p>Cuttlefish is a program to produce the compacted de Bruijn graph from sequencing reads or reference sequences.</p>
<p>The papers describing the work are: <a href="https://academic.oup.com/bioinformatics/article/37/Supplement_1/i177/6319696">Cuttlefish (original)</a> and <a href="https://doi.org/10.1186/s13059-022-02743-6">Cuttlefish 2</a>.</p>
<h2 id="dependencies">Dependencies</h2>
<p>Cuttlefish can be installed using Bioconda (check <a href="#installation">Installation</a>).
If installing <em>from source</em>, the following are required:</p>
<ul>
<li><a href="https://gcc.gnu.org/">GCC</a> <strong>or</strong> <a href="https://clang.llvm.org">Clang</a> compilers for C++17 and C11</li>
<li><a href="https://cmake.org/">CMake</a> (version &gt;= 3.14)</li>
<li><a href="https://zlib.net/">zlib</a></li>
<li><a href="https://www.sourceware.org/bzip2/">bzip2</a></li>
</ul>
<p>These should already be available in your platform; and if not, then these can be easily installed from their sources.
Besides, these should also be available via some package manager for your operating system:</p>
<ul>
<li><strong>Linux</strong></li>
</ul>
<p><code>bash
  sudo apt-get install build-essential cmake zlib1g-dev libbz2-dev</code></p>
<ul>
<li><strong>MacOS</strong></li>
</ul>
<p><code>bash
  brew install --with-toolchain llvm
  brew install cmake zlib bzip2</code></p>
<h2 id="installation">Installation</h2>
<ul>
<li>From <a href="https://bioconda.github.io/user/install.html">Bioconda</a>:</li>
</ul>
<p><code>bash
  conda install -c bioconda cuttlefish</code></p>
<p>The Conda package supports <em>k</em> values up-to 127.
  To use larger <em>k</em> values, please install Cuttlefish from the source.</p>
<ul>
<li>From source:</li>
</ul>
<p><code>bash
  git clone https://github.com/COMBINE-lab/cuttlefish.git
  cd cuttlefish/
  mkdir build &amp;&amp; cd build/
  cmake -DCMAKE_INSTALL_PREFIX=../ ..
  make -j 8 install
  cd ..</code></p>
<p>You may replace <code>8</code> in <code>make -j 8</code> with the preferred count of threads to use in the installation process.</p>
<p>This installs Cuttlefish in a sub-directory named <code>bin</code>, inside the project root directory.
  To specify a different installation directory, its path may be passed as the value of <code>-DCMAKE_INSTALL_PREFIX</code> with the <code>cmake</code> command, i.e. you may use <code>cmake -DCMAKE_INSTALL_PREFIX=&lt;custom_path&gt;/ ..</code> .
  Then the installed Cuttlefish executable will be found in <code>&lt;custom_path&gt;/bin/</code>.
  Skipping <code>-DCMAKE_INSTALL_PREFIX</code> entirely will install Cuttlefish in <code>/usr/local/bin/</code>, for which <code>sudo</code> access might be required (i.e. <code>sudo make -j 8 install</code>).</p>
<p>This installation supports <em>k</em> values up-to <code>63</code>.
  To ensure support for larger values, please compile the source with the slight modification described in <a href="#larger-k-mer-sizes">Larger <em>k</em>-mer sizes</a>.</p>
<h2 id="usage">Usage</h2>
<p><code>cuttlefish build --help</code> displays the following message (the default <code>threads</code> argument is machine-configuration specific):</p>
<pre><code class="language-txt">Efficiently construct the compacted de Bruijn graph from sequencing reads or reference sequences
Usage:
  cuttlefish build [OPTION...]

 common options:
  -s, --seq arg            input files
  -l, --list arg           input file lists
  -d, --dir arg            input file directories
  -k, --kmer-len arg       k-mer length (default: 27)
  -t, --threads arg        number of threads to use (default: 22)
  -o, --output arg         output file
  -w, --work-dir arg       working directory (default: .)
  -m, --max-memory arg     soft maximum memory limit in GB (default: 3)
      --unrestrict-memory  do not impose memory usage restriction
  -h, --help               print usage

 cuttlefish_1 options:
  -f, --format arg  output format (0: FASTA, 1: GFA 1.0, 2: GFA 2.0, 3:
                    GFA-reduced)

 cuttlefish_2 options:
      --read        construct a compacted read de Bruijn graph (for FASTQ
                    input)
      --ref         construct a compacted reference de Bruijn graph (for
                    FASTA input)
  -c, --cutoff arg  frequency cutoff for (k + 1)-mers (default: refs: 1,
                    reads: 2)
      --path-cover  extract a maximal path cover of the de Bruijn graph

 debug options:
      --vertex-set arg  set of vertices, i.e. k-mers (KMC database) prefix
                        (default: &quot;&quot;)
      --edge-set arg    set of edges, i.e. (k + 1)-mers (KMC database) prefix
                        (default: &quot;&quot;)

 specialized options:
      --save-mph       save the minimal perfect hash (BBHash) over the vertex
                       set
      --save-buckets   save the DFA-states collection of the vertices
      --save-vertices  save the vertex set of the graph

</code></pre>
<p>It supports GNU style arguments, <code>--</code> for long options, and <code>-</code> for short options.
Long options <code>opt</code> taking a parameter can be written as <code>--opt=parameter</code> or as <code>--opt parameter</code>.
Short options <code>o</code> taking a parameter is written as <code>-o parameter</code>.</p>
<p>The common arguments (for Cuttlefish 1 and 2) are set as following.</p>
<ul>
<li>The input files can be passed in any of the following ways (and the options may be mixed together).</li>
<li><code>-s &lt;data files&gt;</code></li>
<li><code>-l &lt;newline-separated list files of data files&gt;</code></li>
<li><code>-d &lt;directories containing only the data files&gt;</code></li>
</ul>
<p>Multiple values for each option can be passed as <code>--seq=s1,s2,...</code>, <code>--seq s1 --seq s2 ...</code>, <code>-s s1,s2 ...</code>, or <code>-s s1 -s s2</code> (similarly for <code>list</code> and <code>dir</code>).</p>
<p>In case of using sequencing reads as input, the files should be in the FASTQ format.
  For reference sequences, those should be in the FASTA format.
  The input files can also be gzipped.
- The <em>k</em>-mer length <code>k</code> must be odd and within <code>127</code> (and <code>63</code> if installed from source; see <a href="#larger-k-mer-sizes">Larger <em>k</em>-mer sizes</a> to increase the <em>k</em>-mer size capacity beyond these).
The default value is <code>27</code>.
- The number of threads <code>t</code> is set to a quarter of the number of concurrent threads supported, by default.
The use of high-enough values is recommended.
- Cuttlefish generates two output files:
  - A FASTA / GFA1 / GFA2 file containing the maximal unitigs of the de Bruijn graph (with the extension <code>.fa</code> / <code>.gfa1</code> / <code>.gfa2</code>).
  The GFA output formats are exclusive for Cuttlefish 1.
  - A metadata file containing some structural characteristics of the de Bruijn graph and its compacted form (with the extension <code>.json</code>).
- The working directory <code>w</code> is used for temporary files created by the process—it is not created by Cuttlefish, and must exist beforehand.
The current directory is set as the default working directory.
- A soft maximum memory-limit <code>m</code> (in GB) can be provided to trade-off the RAM usage for faster execution time;
this will only be adhered to if the provided limit is at least the minimum required memory for Cuttlefish, determined internally.
- Memory-usage restrictions can be lifted by using <code>unrestrict-memory</code>, trading off extra RAM usage for faster execution time.</p>
<p>Cuttlefish 1 specific arguments are set as following.</p>
<ul>
<li>The output formats (<code>f</code>) are —</li>
<li><code>0</code>: only the maximal unitig (non-branching path) fragments, in FASTA;</li>
<li><code>1</code>: the maximal unitigs, their connectivities, and the input sequence tilings, in GFA 1.0;</li>
<li><code>2</code>: the maximal unitigs, their connectivities, and the input sequence tilings, in GFA 2.0; and</li>
<li><code>3</code>: the maximal unitigs and the input sequence tilings, in GFA-reduced (see <a href="#io-formats">I/O formats</a>).</li>
</ul>
<p>Cuttlefish 2 specific arguments are set as following.</p>
<ul>
<li><code>read</code> and <code>ref</code> are ''input type'' arguments, based on whether you are providing sequencing reads or reference sequences as input, respectively.</li>
<li>The frequency threshold <code>c</code> (of (k + 1)-mers) is set to <code>2</code> for read inputs, and <code>1</code> for reference inputs, by default.</li>
<li><code>path-cover</code> is used to construct a maximal vertex-disjoint path cover of the de Bruijn graph, instead of its compacted variant.</li>
</ul>
<h3 id="note">Note</h3>
<p>The edge- and / or the vertex-set generation step could produce a high number of temporary files in disk, up-to 2000.
Failure to ensure the capability of opening this many files could produce error messages of the following form:</p>
<blockquote>
<p>Error: Cannot open temporary file ./kmc_00000.bin</p>
</blockquote>
<p>The concurrently open file-handle limit for the user running the process can be raised with the following command:</p>
<p><code>bash
  ulimit -n 2048</code></p>
<h2 id="output-formats">Output formats</h2>
<h3 id="cuttlefish-2-output">Cuttlefish 2 output</h3>
<p>The currently supported output format is</p>
<ul>
<li>The set of the maximal unitigs (non-branching paths) of the de Bruijn graph, in FASTA</li>
</ul>
<p>Other output formats are currently in the development roadmap.</p>
<h3 id="cuttlefish-1-output">Cuttlefish 1 output</h3>
<p>The currently supported output formats are —</p>
<ul>
<li>The set of the maximal unitigs (non-branching paths) of the de Bruijn graph, in FASTA</li>
<li>The compacted de Bruijn graph in the <a href="https://github.com/GFA-spec/GFA-spec/blob/master/GFA1.md">GFA 1.0</a> and the <a href="https://github.com/GFA-spec/GFA-spec/blob/master/GFA2.md">GFA 2.0</a> formats</li>
<li>The compacted de Bruijn graph in a ''reduced'' GFA format. It consists of two files, with the extensions: <code>.cf_seg</code> and <code>.cf_seq</code>:</li>
<li>The <code>.cf_seg</code> file contains all the maximal unitig fragments of the graph (the segment outputs from GFA, i.e. the <code>S</code>-tagged entries), each one with a unique id.
  This file is a list of pairs <code>&lt;id segment&gt;</code>.</li>
<li>The <code>.cf_seq</code> file contains the ''tiling'' of each input sequence, made by the maximal unitig fragments (the paths in GFA 1 / ordered groups in GFA 2, i.e. the <code>P</code>- / <code>O</code>-tagged entries).
  Each line of the file is of the format <code>&lt;id tiling&gt;</code>, where <code>id</code> is a unique identifier (name) of this sequence, and <code>tiling</code> is a space-separated list of the unitig ids, completely covering the sequence.
  Each unitig id also has a <code>+</code> or <code>-</code> sign following it, depending on whether the corresponding unitig is present in the canonical or the reverse-complemented form in this tiling order.</li>
</ul>
<p>For the example reference file <code>refs1.fa</code> (provided in the <code>data</code> directory), the output files <em>may</em> look like the following.</p>
<table>
  <tr><th>Reference file</th></tr>
  <td>
    >ref1

    CGACATGTCTTAG
  </td>
  </table>

<table>
  <tr><th>Segments file</th><th>Sequence tilings file</th></tr>
  <tr>
  <td>

    1 CGA  
    3 ATGTC  
    6 CTAAGA

  </td>
  <td>

    Reference:1_Sequence:ref1 1+ 3- 3+ 6-

  </td></tr>
  </table>

<p>The only GFA information missing <em>explictly</em> in this format is the links (GFA 1) / edges and gaps (GFA 2), i.e. the <code>L</code>- or the <code>E</code>- and the <code>G</code>-tagged entries.
  These can be readily inferred from the sequence-tilings.
  For example, a tiling <code><seq_id u\<sub>0\</sub> u\<sub>1\</sub> ... u\<sub>n\</sub>></code> corresponds to the edge and gap multi-set <code>{(u<sub>0</sub>, u<sub>1</sub>), (u<sub>1</sub> u<sub>2</sub>), ... , (u<sub>n-1</sub>, u<sub>n</sub>)}</code>.
  Whether a pair <code>(u<sub>i</sub>, u<sub>i+1</sub>)</code> is an edge or a gap can be inferred by checking the suffix and the prefix (of length <code>k - 1</code>) of the unitigs <code>u<sub>i</sub></code> and <code>u<sub>i+1</sub></code>, respectively (in their correct orientations, based on their following <code>+</code>/<code>-</code> signs).
  Note that, a gap is possible in a sequence-tiling only if the sequence contains characters outside of <code>A</code>, <code>C</code>, <code>G</code>, and <code>T</code>.</p>
<p>For moderate to large sized genomes, this output format is preferrable to the GFA ones as the GFA formats can be quite verbose for this particular scenario, while the reduced representation provides effitively the same information, while taking much less space.
  For example, for the 7-human genome dataset (experimented with in the manuscripts) and using <code>k = 31</code>, the compacted graph takes 112 GB in GFA2, but only 29.3 GB in this reduced format.</p>
<h3 id="orientation-of-the-output">Orientation of the output</h3>
<p>Cuttlefish works with the canonical representations of the <em>k</em>-mers, i.e. each <em>k</em>-mer and its reverse complement are treated as the same vertex in the original graph.
The maximal unitig fragments (the ''segments'' in the GFA-terminology) are always output in their canonical forms—the orientations are guaranteed to be the same across identical executions.</p>
<h3 id="colored-output-for-cuttlefish-1">''Colored'' output for Cuttlefish 1</h3>
<p>In the <a href="https://github.com/GFA-spec/GFA-spec">GFA</a> output formats for the compacted de Bruijn graph, the graph is represented as a list of the vertices (i.e. the maximal unitigs) and the adjacencies between them.
The output also includes a path-tiling for each individual sequence in the input references, i.e. an ordered list of the maximal unitig ids that completely tile that sequence.
Put differently, the GFA outputs describe a colored de Bruijn graph in the sense that the color information for each vertex (maximal unitig) is encoded in the <code>P</code> (GFA 1.0) or the <code>O</code> (GFA 2.0) entries (or the tilings in the <code>.cf_seq</code> file, in the reduced output).</p>
<p>Throughout the <a href="https://academic.oup.com/bioinformatics/article/37/Supplement_1/i177/6319696">manuscript (Cuttlefish 1)</a>, when we mention the colored de Bruijn graph, we refer to a specific definition of colors.
While this definition is intuitive and natural when constructing the compacted colored de Bruijn graph from a set of reference genomes, it is not the case that the Cuttlefish algorithm allows arbitrary coloring of the <em>k</em>-mers in the de Bruijn graph.
Specifically, in the definition adopted herein, the color set of a unitig is the subset of input references <code>s<sub>i<sub>1</sub></sub>, s<sub>i<sub>2</sub></sub>, ..., s<sub>i<sub>l</sub></sub></code> in which the unitig appears.
This color information is implicitly encoded in the path entries of the output GFA files (the <code>P</code> entries in GFA 1.0 and the <code>O</code> entries in GFA 2.0).
As a result, all unitigs produced by Cuttlefish are ''monochromatic'' under this coloring definition, as a change to the color set internally to a unitig would imply either a branch (which would terminate the unitig) or the start or end of some reference string and a sentinel <em>k</em>-mer (which would also terminate the unitig).
If one were constructing the compacted colored de Bruijn graph from raw sequencing reads or from highly-fractured assemblies, then one may wish to adopt a different notion of color, wherein color sets may vary across an individual unitig.</p>
<h2 id="example-usage">Example usage</h2>
<p>We use <em>k</em> = 3, and 4 CPU threads, with a working directory named <code>temp</code> in the following examples.</p>
<h3 id="using-cuttlefish-2">Using Cuttlefish 2</h3>
<ul>
<li><strong>From FASTQ files</strong></li>
</ul>
<p>To construct the maximal unitigs of the example FASTQ file <code>reads.fq</code> (provided in the <code>data</code> directory) with frequency cutoff <code>c = 1</code>, the following may be used.</p>
<pre><code class="language-bash">cuttlefish build -s reads.fq -k 3 -t 4 -o cdbg -w temp/ --read -c 1
</code></pre>
<ul>
<li><strong>From FASTA files</strong></li>
</ul>
<p>To construct the maximal unitigs of the example FASTA file <code>refs1.fa</code> (provided in the <code>data</code> directory), the following may be used.</p>
<pre><code class="language-bash">cuttlefish build -s refs1.fa -k 3 -t 4 -o cdbg -w temp/ --ref
</code></pre>
<p>These executions will produce two output files each: <code>cdbg.fa</code>, containing the maximal unitigs of the graph; and <code>cdbg.json</code>, a metadata file with some structural characteristics of the graph.</p>
<p>Multiple seq-files, lists of seq-files, or directories of seq-files may also be passed, as described in <a href="#usage">Usage</a>.</p>
<h3 id="using-cuttlefish-1">Using Cuttlefish 1</h3>
<p>To output the compacted de Bruijn graph (in GFA 2.0) for the example FASTA files <code>refs1.fa</code> and <code>refs2.fa</code> (provided in the <code>data</code> directory), the following may be used:</p>
<pre><code class="language-bash">cuttlefish build -s refs1.fa,refs2.fa -k 3 -t 4 -o cdbg.gfa2 -f 2 -w temp/
</code></pre>
<p>You may also provide lists or directories of reference files as input, as described in <a href="#usage">Usage</a>.</p>
<h2 id="larger-k-mer-sizes">Larger <em>k</em>-mer sizes</h2>
<p>The default maximum <em>k</em>-mer size supported with the installation from source is <code>63</code>.
To set the maximum <em>k</em>-mer size capacity to some <code>MAX_K</code>, add <code>-DINSTANCE_COUNT=&lt;instance_count&gt;</code> with the <code>cmake</code> command—where <code>&lt;instance_count&gt;</code> is the number of <code>k</code>-values that are to be supported by Cuttlefish, and should be set to <code>(MAX_K + 1) / 2</code>.
For example, to support a <code>MAX_K</code> of 127, use the following:</p>
<pre><code class="language-bash">cmake -DINSTANCE_COUNT=64 ..
</code></pre>
<p>Cuttlefish supports only the odd <code>k</code> values within <code>MAX_K</code> due to theoretical reasons.
Currently, <code>MAX_K</code> is supported upto 255.
Please contact the authors if support for a larger <code>MAX_K</code> is required.</p>
<p>Note that, Cuttlefish uses only as many bytes as required (rounded up to multiples of 8) for a <em>k</em>-mer. Thus, increasing the maximum <em>k</em>-mer size capacity through setting large values for <code>MAX_K</code> does not affect the performance for smaller <em>k</em>-mer sizes.</p>
<h2 id="differences-between-cuttlefish-1-2">Differences between Cuttlefish 1 &amp; 2</h2>
<ul>
<li>Cuttlefish 1 is applicable only for assembled reference sequences.
Whereas Cuttlefish 2 is applicable for both sequencing reads and reference sequences.</li>
<li>For reference sequences, Cuttlefish 1 supports outputting the compacted graph in the GFA formats, whereas Cuttlefish 2 does not support this <em>yet</em>.</li>
<li>Cuttlefish 2 can be used by passing either one of the following arguments to the <code>cuttlefish build</code> command: <code>--read</code> or <code>--ref</code>.
Passing neither of these invokes Cuttlefish 1.</li>
</ul>
<h2 id="citations-acknowledgement">Citations &amp; Acknowledgement</h2>
<p>If you use Cuttlefish or Cuttlefish 2 in your work, please include the following citations, as appropriate:</p>
<h3 id="cuttlefish-original"><a href="https://doi.org/10.1093/bioinformatics/btab309">Cuttlefish (original)</a></h3>
<blockquote>
<p>Jamshed Khan, Rob Patro, Cuttlefish: fast, parallel and low-memory compaction of de Bruijn graphs from large-scale genome collections, Bioinformatics, Volume 37, Issue Supplement_1, July 2021, Pages i177–i186, <a href="https://doi.org/10.1093/bioinformatics/btab309">https://doi.org/10.1093/bioinformatics/btab309</a></p>
</blockquote>
<h3 id="cuttlefish-2"><a href="https://doi.org/10.1186/s13059-022-02743-6">Cuttlefish 2</a></h3>
<blockquote>
<p>Khan, J., Kokot, M., Deorowicz, S. et al. Scalable, ultra-fast, and low-memory construction of compacted de Bruijn graphs with Cuttlefish 2. Genome Biol 23, 190 (2022). <a href="https://doi.org/10.1186/s13059-022-02743-6">https://doi.org/10.1186/s13059-022-02743-6</a></p>
</blockquote>
<p>This work is supported by <em>NIH R01 HG009937</em>, and by <em>NSF CCF-1750472</em>, and <em>CNS-1763680</em>.</p>
<h2 id="licenses">Licenses</h2>
<ul>
<li>The <a href="https://github.com/rizkg/BBHash">BBHash</a> library is MIT licensed.</li>
<li>The <a href="https://www.boost.org/doc/libs/1_31_0/libs/mpl/doc/index.html">Boost C++ Metaprogramming</a> library is Boost Software licensed.</li>
<li>The <a href="https://github.com/gmarcais/compact_vector">compact_vector</a> library is MIT licensed.</li>
<li>The <a href="https://github.com/jarro2783/cxxopts">cxxopts</a> library is MIT licensed.</li>
<li>The <a href="https://github.com/fmtlib/fmt">fmt</a> library is MIT licensed.</li>
<li>The <a href="https://github.com/refresh-bio/KMC">KMC</a> software is GNU GPL 3 licensed.</li>
<li>The <a href="http://lh3lh3.users.sourceforge.net/kseq.shtml">kseq</a> library is MIT licensed.</li>
<li>The <a href="https://github.com/gabime/spdlog">spdlog</a> library is MIT licensed.</li>
<li>The <a href="https://github.com/Cyan4973/xxHash">xxHash</a> library is BSD licensed.</li>
<li>Cuttlefish itself is Revised BSD licensed.</li>
</ul>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": ".", "features": [], "search": "assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="assets/javascripts/bundle.cd18aaf1.min.js"></script>
      
    
  </body>
</html>